# 21장. 빌트인 객체

p. 320 ~ p. 00

## 자바스크립트 객체의 분류

표준 빌트인 객체

- ECMAScript 사양에 정의된 객체로, 애플리케이션 전역의 공통 기능을 제공한다.

  - 자바스크립트 실행 환경과 관계없이 언제나 사용할 수 있다.

- 전역 객체의 프로퍼티로서 제공된다.

  - 별도의 선언 없이 전역 변수처럼 언제나 참조할 수 있다.

호스트 객체

- ECMAScript 사양에 정의되어 있지 않지만 자바스크립트 실행 환경에서 추가로 제공하는 객체다.

- 브라우저 환경

  - 클라이언트 사이드 Web API를 호스트 객체로 제공한다.

    - DOM. BOM, Canvas, XMLHttpRequest, fetch, requestAnimationFrame, SVG, Web Storage, Web Component, Web Worker

- Node.js 환경

  - Node.js 고유의 API를 호스트 객체로 제공한다.

사용자 정의 객체

- 기본 제공되는 객체가 아닌 사용자가 직접 정의한 객체를 말한다.

## 표준 빌트인 객체

자바스크립트는 40여 개의 표준 빌트인 객체를 제공한다.

- Object, String, Number, Boolean, Symbol, Date, Math, RegExp, Array, Map/Set, WeakMap/WeakSet, Function, Promise, Reflect, Proxy, JSON, Error, ...

Math, Reflect, JSON을 제외한 표준 빌트인 객체는 모두 인스턴스를 생성할 수 있는 생성자 함수 객체다.

- 생성자 함수 객체는 프로토타입 메서드와 정적 메서드를 모두 제공한다.

- 생성자 함수 객체가 아닌 표준 빌트인 객체는 정적 메서드만 제공한다.

프로토타입 메서드는 해당 생성자 함수가 생성한 인스턴스가 상속을 통해 사용할 수 있다.

정적 메서드는 인스턴스 없이 정적으로 호출할 수 있다.

## 원시값과 래퍼 객체

원시값에 대해 마치 객체처럼 마침표 표기법(또는 대괄호 표기법)으로 접근하면 자바스크립트 엔진이 일시적으로 원시값을 연관된 객체로 변환한다.

원시값을 객체처럼 사용하면

- 자바스크립트 엔진은 암묵적으로 연관된 객체를 생성하여

  - String의 경우, 기존 원시값(문자열)은 생성된 객체의 \[\[StringData]] 내부 슬롯에 할당된다.

    - Number의 경우, \[\[NumberData]] 내부 슬롯

- 생성된 객체로 프로퍼티에 접근하거나 메서드를 호출하고

다시 원시값으로 되돌린다.

- 래퍼 객체는 가비지 컬렉션의 대상이 된다.

이때 객체처럼 접근하면 생성되는 임시 객체를 래퍼 객체라 한다.

문자열, 숫자, 불리언, 심벌 이외의 원시값(null, undefined)은 래퍼 객체를 생성하지 않는다.

## 전역 객체

코드가 실행되기 이전 단계에 자바스크립트 엔진에 의해 어떤 객체보다도 먼저 생성되는 특수한 객체다.

어떤 객체에도 속하지 않은 최상위 객체다.

자바스크립트 환경에 따라 지칭하는 이름이 제각각이다.

- 브라우저 환경에서 window(또는 self, this, frames)

- Node.js 환경에서 global

위 식별자를 통일한 표준 사양 globalThis가 ES11에서 도입되었다.

전역 객체의 특징

- 전역 객체는 개발자가 의도적으로 생성할 수 없다.

  - 전역 객체를 생성할 수 있는 생성자 함수가 제공되지 않는다.

- 전역 객체의 프로퍼티를 참조할 때 window(또는 global)를 생략할 수 있다.

- 전역 객체는 모든 표준 빌트인 객체를 프로퍼티로 가지고 있다.

- 자바스크립트 실행 환경에 따라 추가적으로 프로퍼티와 메서드를 갖는다. (호스트 객체)

- var 키워드로 선언한 전역 변수와 선언하지 않은 변수에 값을 할당한 암묵적 전역, 전역 함수는 전역 객체의 프로퍼티가 된다.

- let이나 const 키워드로 선언한 전역 변수는 전역 객체의 프로퍼티가 아니다.

  - 보이지 않는 개념적인 블록(전역 렉시컬 환경의 선언적 환경 레코드) 내에 존재하게 된다.

- 브라우저 환경의 모든 자바스크립트 코드는 하나의 전역 객체 window를 공유한다.

  - 여러 개의 script 태그를 통해 자바스크립트 코드를 분리해도 하나의 전역 객체 window를 공유한다.

    - 분리되어 있는 자바스크립트 코드가 하나의 전역을 공유한다.
