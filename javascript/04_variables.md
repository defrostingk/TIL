# 04장. 변수

p. 34 ~ p. 49

## 변수

하나의 값을 저장하기 위해 확보한 **메모리 공간 자체** 또는 그 메모리 공간을 **식별하기 위해 붙인 이름**

값의 위치를 가리키는 상징적인 이름, 안전하게 값에 접근할 수 있다.

- 메모리 주소를 통해 값에 직접 겁근하는 것은 치명적인 오류를 일으킬 수 있다.

  - 운영체제가 사용하고 있는 값을 변경하면 시스템을 멈추게 하는 등 치명적인 오류가 발생할 수 있다.

  - 따라서 자바스크립트는 개발자의 직접적인 메모리 제어를 허용하지 않는다.

  - 메모리 제어를 허용하더라도 값이 저장되는 메모리 주소는 메모리 상황에 따라 임의로 결정된다.

    - 따라서 코드가 실행되기 전에는 값이 저장된 메모리 주소를 알 수 없다.

  - 메모리 주소를 통해 값에 직접 접근하려는 시도는 올바른 방법이 아니다.

메모리 공간에 저장된 값을 식별할 수 있는 고유한 이름을 **변수명**, 변수에 저장된 값을 **변수 값**이라한다.

변수에 값을 저장하는 것을 **할당(대입, 저장)**이라 하고, 변수에 저장된 값을 읽어 들이는 것을 **참조**라한다.

## 식별자

식별자는 어떤 값을 구별해서 식별할 수 있는 고유한 이름을 말한다. 변수명을 식별자라고도 한다.

메모리 공간에 저장되어 있는 어떤 값을 구별해서 식별해 낼 수 있어야 한다.

- 어떤 값이 저장되어 있는 메모리 주소를 기억(저장)해야 한다.

- 식별자는 값이 저장되어 있는 메모리 주소와 매핑 관계를 맺으며, 이 매핑 정보도 메모리에 저장된다.

식별자는 **값**이 아니라 **메모리 주소**를 기억한다.

변수, 함수, 클래스 등의 이름은 모두 식별자이다.

## 변수 선언

값을 저장하기 위한 메모리 공간을 확보하고

변수 이름과 확보된 메모리 공간을 연결하여

값을 저장할 수 있게 준비하는 것 -> 변수를 생성하는 것

- 변수 선언에 의해 확보된 메모리 공간은 확보가 해제되기 전까지 누구도 사용할 수 없도록 안전하게 보호된다.

변수 선언은 2단계에 걸쳐 수행한다.

- 선언 단계

  변수 이름을 등록하여 자바스크립트 엔진에 변수의 존재를 알린다.

  - 변수 이름을 비롯한 모든 식별자는 **실행 컨텍스트**에 등록된다.

  - 변수 이름과 변수 값이 key/value 형식인 객체로 등록되어 관리된다.

- 초기화 단계

  값을 저장하기 위한 메모리 공간을 확보하고 암묵적으로 undefined를 할당해 초기화한다.

  - 초기화 단계를 거치지 않으면 확보된 메모리 공간에 이전에 다른 애플리케이션이 사용했던 값(쓰레기 값)이 남아있을 수 있다.

  - 자바스크립트는 암묵적으로 초기화를 수행하므로 이러한 위험이 없다.

## 키워드

자바스크립트 엔진이 수행할 동작을 규정한 일종의 명렬어

엔진은 키워드를 만나면 자신이 수행해야 할 약속된 동작을 수행한다.

## var의 문제점

블록 레벨 스코프를 지원하지 않고 함수 레벨 스코프를 지원한다.

- 의도치 않게 전역 변수가 선언되는 등으로 인해 오류를 일으킨다.

## 변수 선언의 실행 시점

변수 선언은 런타임(소스코드가 한 줄씩 순차적으로 실행되는 시점)이 아니라 그 이전 단계에서 먼저 실행된다.

## 호이스팅

변수 선언문이 코드의 선두로 끌어 올려진 것처럼 동작하는 자바스크립트 고유의 특징이다.

변수 선언뿐만 아니라 모든 식별자는 호이스팅된다.

모든 선언문은 런타임 이전 단계에서 먼저 실행된다.

- 선언은 런타임 이전에 실행되지만, 값의 할당은 런타임에 실행된다.

## 값의 할당

변수에 값을 할당할 때는 이전 값(undefined 등)가 저장되어 있던 메모리 공간을 지우고 그 메모리 공간에 **할당값을 새롭게 저장하는 것이 아니다!**

**새로운 메모리 공간을 확보**하고 그곳에 할당 값을 저장한다.

이전에 할당되어 있던, 어떤 식별자와도 연결되어 있지 않은 값, 더 이상 필요하지 않는 값은

가비지 콜렉터에 의해 메모리에서 자동 해제된다.

- 이때 메모리에서 언제 해제될지는 예측할 수 없다.

## 가비지 콜렉터

애플리케이션이 할당한 메모리 공간을 주기적으로 검사하여 **더 이상 사용되지 않는 메모리**를 해제하는 기능이다.

- 더 이상 사용되지 않는 메모리란 어떤 식별자도 참조하지 않는 메모리 공간이다.

자바스크립트는 가비지 콜렉터를 통해 메모리 누수를 방지하는 매니지드 언어이다.

## 언매니지드 언어

개발자가 명시적으로 메모리를 할당하고 해제할 수 있는 메모리 제어 기능을 제공한다.

개발자가 메모리 제어를 주도하므로 개발자의 역량에 따라 최적의 성능을 확보할 수 있으나

그 반대의 경우 치명적 오류를 생산할 가능성이 있다.

## 매니지드 언어

메모리의 할당 및 해제를 위한 메모리 관리 기능을 언어 차원에서 담당한다.

개발자가 명시적으로 메모리를 할당하고 해제할 수 없다.

개발자의 역량에 의존하는 부분이 상대적으로 작아 어느정도 일정한 생산성을 확보할 수 있다.

성능 면에서 어느정도 손실은 감수하여야 한다.

## 예약어

프로그래밍 언어에서 사용되고 있거나 사용될 예정인 단어

await, break, case, ...

## 네이밍 컨벤션

camelCase

snake_case

PascalCase

typeHungarianCase

- strFirstName, $elem, ...

자바스크립트에서는 일반적으로 변수나 함수 이름에 카멜 케이스,

생성자 함수, 클래스의 이름에 파스칼 케이스를 사용한다.
